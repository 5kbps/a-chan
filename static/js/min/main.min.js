"use strict";function byID(a){return document.getElementById(a)}function byClass(a){return document.getElementsByClassName(a)}function byTag(a){return document.getElementsByTagName(a)}function byName(a){return document.getElementsByName(a)}function Cycle(a,b){for(var c=0;a>c;c++)b(c)}function CycleThrough(a,b){for(var c in a)a.hasOwnProperty(c)&&"length"!=c&&b(c)}function pushStyle(a){var b=newElement("style");return b.innerHTML=a,document.head.appendChild(b),b}function collect(){for(var a={},b=arguments.length,c=0;b>c;c++)for(var d in arguments[c])arguments[c].hasOwnProperty(d)&&(a[d]=arguments[c][d]);return a}function newElement(a){return document.createElement(a)}function newTextNode(a){return document.createTextNode(a)}function insertAfter(a,b){var c=b.parentNode,d=b.nextSibling;return d?c.insertBefore(a,d):c.appendChild(a)}function stopPropagation(a){"function"==typeof a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}function getOffset(a){var b=a.getBoundingClientRect();return{x:b.left,y:b.top,right:b.right,bottom:b.bottom,h:b.height,w:b.width}}function normalizeIntLength(a,b,c){if(c=c?c:"0",a+="",a.length<b)for(var d=0;d<b-a.length;d++)a=c+a;return a}function getInt(a){for(var b=[],c=0;c<a.length;c++)-1!="1234567890".indexOf(a[c])?b.push(a[c]):0;return 1*b.join([])}function genPassword(){for(var a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",b="",c=0;10>c;c++){var d=Math.floor(Math.random()*a.length);b+=a.substring(d,d+1)}return b}function ellipsis(a,b){var c="...";return a.length>b-c.length?a.substr(0,b)+c:a}function getWindowSize(){var a=window,b=document,c=b.documentElement,d=b.getElementsByTagName("body")[0],e=a.innerWidth||c.clientWidth||d.clientWidth,f=a.innerHeight||c.clientHeight||d.clientHeight;return{x:e,y:f}}function loadSettings(){"undefined"==typeof localStorage.settings&&applyDefaultSettings(),Settings=JSON.parse(localStorage.settings),Settings||(Settings=[])}function getSetting(a){return Settings||loadSettings(),"time_format"==a&&1*getSetting("time_format_i")<2&&(Settings[a]=DefaultSettings[a],Settings.time_format_i=2,saveSettings()),"undefined"==typeof Settings[a]?"undefined"==typeof DefaultSettings[a]?!1:(Settings[a]=DefaultSettings[a],saveSettings(),DefaultSettings[a]):Settings[a]}function getPostNumByElem(a){for(;a.parentNode;){if("reply"==a.className||"thread"==a.className)return getInt(a.id);a=a.parentNode}return null}function applyDefaultSettings(){Settings=DefaultSettings,saveSettings()}function saveSettings(){localStorage.settings=JSON.stringify(Settings)}function setCookie(a,b,c){c=c||{};var d=c.expires;if("number"==typeof d&&d){var e=new Date;e.setTime(e.getTime()+1e3*d),d=c.expires=e}d&&d.toUTCString&&(c.expires=d.toUTCString()),b=encodeURIComponent(b);var f=a+"="+b;for(var g in c){f+="; "+g;var h=c[g];h!==!0&&(f+="="+h)}document.cookie=f}function getCookie(a){var b=document.cookie.match(new RegExp("(?:^|; )"+a.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return b?decodeURIComponent(b[1]):""}function isMobile(){var a=!1;return function(b){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(b)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(b.substr(0,4)))&&(a=!0)}(navigator.userAgent||navigator.vendor||window.opera),a}function constructElementTree(a){var b,c,d=[];a=a.map(newElement),b=a[0],c=b,d.push(b);for(var e=1;e<a.length;e++)b.appendChild(a[e]),d.push(a[e]),console.log(a[e]),console.log(d),b=a[e];return{list:d,last:b,first:c}}function constructElementList(a){return a.map(newElement)}function decodeHTML(a){var b=newElement("span");return b.innerHTML=a,b.textContent}function checkStyle(a){return cache.appliedStyle?void(cache.appliedStyle!=getStyle()+" "+getCookie("center_posts")&&(changeStyle(getStyle()),saveAppliedStyle(),"function"==typeof a&&a())):void saveAppliedStyle()}function changeStyle(a){setCookie("style",a,{expires:864e4,path:"/"}),setTimeout(function(){byID("styleman").href=document.location.protocol+"//"+document.location.host+config.style_path+"?"+Math.random()},10)}function getStyle(){return getCookie("style")?getCookie("style"):config.default_style}function saveAppliedStyle(){cache.appliedStyle=getStyle()+" "+getCookie("center_posts")}function initConfig(){config.board=byName("board")[0].value}Object.prototype.getKeys=function(){var a=[];for(var b in this)this.hasOwnProperty(b)&&a.push(b);return a},Object.prototype.hasKey=function(a){for(var b in this)if(this.hasOwnProperty(b)&&b==a)return!0;return!1},Object.prototype.hasValue=function(a){for(var b in this)if(this.hasOwnProperty(b)&&this[b]==a)return!0;return!1},Object.prototype.append=function(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b])},Element.prototype.setProperties=function(a){for(var b in a)this[b]=a[b]},Element.prototype.byID=function(a){return this.getElementById(a)},Element.prototype.pushStyleArray=function(a){for(var b in a)this.style[b]=a[b]},Element.prototype.byClass=function(a){return this.getElementsByClassName(a)},Element.prototype.byTag=function(a){return this.getElementsByTagName(a)},Element.prototype.hasClass=function(a){for(var b=this.className.split(" "),c=0;c<b.length;c++)if(b[c]==a)return!0;return!1},Element.prototype.insertAfter=function(a,b){var c=b.nextSibling;return c?this.insertBefore(a,c):this.appendChild(a)},Element.prototype.addClass=function(a){for(var b=this.className.split(" "),c=0;c<b.length;c++)if(b[c]==a)return;this.className+=" "+a},Element.prototype.removeClass=function(a){for(var b=this.className.split(" "),c=[],d=0;d<b.length;d++)b[d]!=a&&c.push(b[d]);this.className=c.join(" ")},Array.prototype.inArray=function(a){for(var b in this)if(this.hasOwnProperty(b)&&this[b]==a)return!0;return!1},Array.prototype.getProperties=function(a,b){var c=[],b=b?b:1;for(var d in this)if(this.hasOwnProperty(d)){for(var e=this[d],f=0;b>f;f++)e=e[a];c.push(e)}return c},String.prototype.replaceAll=function(a,b){return this.replace(new RegExp(a,"g"),b)},HTMLCollection.prototype.map||(HTMLCollection.prototype.map=function(a){for(var b=0;b<this.length;b++)a(this[b])}),document.addEventListener("DOMContentLoaded",function(){window.addEventListener("focus",checkStyle)});var config={hide_posts_mouse_move_delta:100,op_reflist_on_top:!1,reply_reflist_on_top:!1,reflink_prefix:">>",reflink_op_postfix:"[OP]",reflink_self_postfix:"[GET]",post_reflink_text:"No. ",highlight_timeout:5e3,clearreplyto_text:"[x]",min_update_interval:2e4,highlighted_post_delay:150,default_style:"Muon",style_path:"/static/style.php",board_path:"board.php",reply_like_class:"reply-like",loaded_post_class:"loaded-post",highlighted_post_class:"highlighted-post",outlined_post_class:"outlined-post",delform_id:"del-form",new_post_class:"new-post",underlined_link_id:"underlined-link",board_link_counter_class:"board-link-counter",favicon_path:"/favicon.ico",cpuboiler_path:"/static/js/src/cpuboiler.js",captcha_min_length:1,pow_allowed:!0,api_path:"api.php",is_mobile:"function"==typeof isMobile?isMobile():!1,"snow-delay":2,"snow-speed":1,max_script_execution_time:3e3};"undefined"!=typeof getWindowSize&&(config=collect({loaded_post_min_width:300,loaded_post_max_width:getWindowSize().x>1e3?1e3:getWindowSize().x-10},config));var DefaultSettings={time_formatting:!1,time_format:"dd.MM.yyyy (ddd) <b>HH:mm</b>:ss",time_format_i:1,highlight_posts:!1,title_format:"counter /boarddir/ - subject text boardname",update:!1,autoupdate:!0,updateinterval:40,language:"ru",reflinks:!0,youtube:!0,max_youtube:1,youtube_info:!0,center_posts:!1,ignored_boards:"",hidden_boards:"",expandspoilers:!1,saveimages:!0,noinit:!1,unsafe_init:!1,reflist_on_top:!1,tab_notification:!0,ajax_post_send:!1,preference:"pow",hidden:{},last_posts:{},password:"function"==typeof genPassword?genPassword():"",debug:!1},Ref,flags={mouseposition:{x:0,y:0}},cache={posts:{},requests:{},youtube:{},new_posts:{},check_passed:!1,pow_status:0,captcha_status:0,timeout_status:0,last_check:0,last_check_content:""},Settings;setInterval(checkStyle,3e3);